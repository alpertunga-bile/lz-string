#include "utilities.hpp"

#include <gtest/gtest.h>

TEST(CompressUTF16, HelloWorld) {
  std::string input(hello_world);

  std::vector<uint16_t> result = {610,   19501, 19518, 24612, 1908, 16572,
                                  24617, 23076, 4232,  32,    32};

  EXPECT_TRUE(compare_u16(LZStringOptions::VALID_UTF16, input, result));
}

TEST(CompressUTF16, AllASCII) {
  std::string input(all_ascii);

  std::vector<uint16_t> result = {
      162,   2097,  424,   608,   21027, 4156,  16426, 328,   704,   6816,
      6690,  26663, 8254,  16419, 102,   108,   440,   208,   1408,  1760,
      7584,  1824,  20000, 23587, 14369, 28715, 24623, 16447, 16416, 8240,
      8232,  8248,  8228,  8244,  8236,  8252,  8226,  8242,  8234,  8250,
      8230,  8246,  8238,  8254,  8225,  8241,  8233,  8249,  8229,  8245,
      8237,  8253,  8227,  8243,  8235,  8251,  8231,  8247,  8239,  8239,
      20512, 6178,  3104,  17952, 25376, 2464,  5344,  1664,  1872,  120,
      332,   118,   139,   45,    16438, 24615, 12327, 22560, 7201,  3616,
      10016, 13216, 1504,  2816,  912,   984,   92,    190,   79,    87,
      16423, 24619, 28707, 31008, 32};

  EXPECT_TRUE(compare_u16(LZStringOptions::VALID_UTF16, input, result));
}

TEST(CompressUTF16, JSON) {
  std::string input(temp_json);

  std::vector<uint16_t> result = {
      7137,  2131,  16508, 1280,  19235, 22588, 25121, 14432, 1185,  9761,
      22912, 31520, 26656, 4142,  21994, 5664,  19492, 4271,  17496, 728,
      1488,  1153,  18996, 592,   640,   3303,  9678,  11852, 3105,  1680,
      10688, 6275,  21635, 17070, 11069, 10440, 10434, 348,   10275, 13659,
      29591, 26624, 751,   16437, 16439, 10103, 1440,  5542,  131,   1076,
      20625, 8888,  12481, 37,    5600,  391,   2144,  587,   18326, 10307,
      23985, 15392, 1643,  7613,  16800, 266,   4257,  17152, 9584,  234,
      23584, 6564,  61,    25281, 17448, 24609, 24017, 14609, 30256, 79,
      22115, 2337,  16576, 1033,  11660, 3694,  4209,  1317,  2606,  22062,
      27809, 29826, 7536,  15580, 16928, 11464, 24112, 20152, 29635, 22752,
      8533,  10272, 16728, 15012, 5943,  4423,  9378,  10148, 16417, 16971,
      23088, 55,    17982, 4618,  7249,  7028,  27227, 10810, 26316, 29549,
      24290, 2044,  17142, 15064, 3933,  25186, 18498, 2196,  24884, 7074,
      12533, 16215, 992,   297,   11347, 4913,  12818, 20162, 6233,  1106,
      8821,  6570,  21024, 32};

  EXPECT_TRUE(compare_u16(LZStringOptions::VALID_UTF16, input, result));
}

TEST(CompressUTF16, JSONFloat) {
  std::string input(temp_json_float);

  std::vector<uint16_t> result = {
      7137,  2105,  16524, 3968,  17185, 14496, 11811, 6183,  8259,  76,
      29749, 16494, 84,    4129,  6496,  5600,  4516,  364,   18468, 25952,
      15194, 88,    29908, 8283,  13603, 19968, 2432,  1805,  8236,  11582,
      2336,  11552, 806,   7556,  19544, 17864, 152,   89,    9108,  29615,
      25378, 3212,  612,   23027, 10227, 25905, 16420, 29395, 51,    24638,
      9760,  32288, 13234, 141,   14892, 556,   29737, 20912, 1208,  21612,
      302,   5415,  43,    21058, 16496, 205,   21536, 25432, 90,    24494,
      33,    12691, 17370, 4448,  27420, 9300,  5710,  4260,  2920,  16518,
      12752, 22561, 15996, 27255, 7253,  6305,  24764, 19304, 26503, 17810,
      18469, 10398, 14047, 9253,  9389,  30562, 4603,  26992, 29845, 31168,
      32,    32};

  EXPECT_TRUE(compare_u16(LZStringOptions::VALID_UTF16, input, result));
}